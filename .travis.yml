dist: trusty
sudo: required
#cache: true

# Blacklist
branches:
  except:
    - gh-pages

language: csharp
solution: YarnSpinner.sln

# Environment variables

env:
  global:
    - DOXYFILES_ROOT: $TRAVIS_BUILD_DIR/Documentation
    - GH_REPO_NAME: YarnSpinner
    - GH_REPO_USER: SecretLab
    - WANTED_DOCS: '"html latex rtf xml"'
    - VERBOSE: false
    - secure: "qaXRG0Ex5DnLp1suGMXWT2faEOSBTySAbFpqqJkTCtazlHIJHmLD1ghGfMxHaLeCPKGtjqJYxHSM+Nrfj7J94uyV4i6I2qZR/DWjPETc0jQYIEY8t+nYDjku9/5tjwExTpZwdC15QN0CGHz1SCJ7KrrHAZLB41717h2PfWHO4CZ6gcu8sGXM7ZR93BDkdKFldQN9ZuGcwAbUFAf2CAhyuu/dchqZ1lefJgM3yZQp/PqdwVGlUnzrAeyNBJuvgNMm6lpwtkpVcMPrzQOk760icQG9HxgBTcK59CCOjSywBZEOBMqZ98/UP29YaqbmUaFlf8OBFxQM40QU+jxf8l19EzIaq35/jsCAanxbBdBXaMZ/VfMwKCXyo3uHAPqjJm/THfAd0ffvJYEE0PQaApWkZckQPI3lnFBB91vBUPrbSljF6JzIQ8Cq3n8t7m1ah9depsBBcDHcH7ffuxDANEDhJUm227VGazhGxpkFeE9LhVV/tU2KD6ChQg95X0BVBs6+06JKapFdY0PQjNCjUpDwLfBA0s5XsOPk5fNrvBqWIl/uEvy88uPQjXbX627DVWDSbe+l2rtHAdp/IaDpisj8mzt3XS8ufEJmMAwL2RXLVgyXU8pwTc8zg3hIyLybQ/ltZpNvjLLFyusgJfUynEX0I++kSptNmNTWuSU612T52qg="

# Install dependencies
addons:
  apt:
    packages:
      - global
#      When using doxygen
      - libjs-jquery
      - graphviz
#      When using supplied doxygen
      - doxygen
      - doxygen-doc
      - doxygen-latex
      - doxygen-gui

install:
  - nuget restore YarnSpinner.sln

script:	
  - ./build.sh -bcdv

# deploy documentation
after_success:
  - cd $TRAVIS_BUILD_DIR
  - chmod +x DeployDocumentation.sh
  - ./DeployDocumentation.sh
